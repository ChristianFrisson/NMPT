<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nick&#39;s Machine Perception Toolbox: FastSalience Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>FastSalience Class Reference<br/>
<small>
[<a class="el" href="group___m_p_group.html">Machine Perception Primitives</a>]</small>
</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="FastSalience" -->
<p><code> <b> Machine Perception Primitive: </b> </code> An implementation of the "Fast Salience Using Natural-statistics" algorithm from Butko, et al., 2008. FastSUN is an efficient implementation of Zhang et al.'s SUN algorithm, which is documented in Zhang, et al., 2008 (see <a class="el" href="bib_page.html#bib_sec">Related Publications</a>).  
<a href="#_details">More...</a></p>

<p><code>#include &lt;FastSalience.h&gt;</code></p>
<!-- startSectionHeader --><div class="dynheader">
Collaboration diagram for FastSalience:<!-- endSectionHeader --></div>
<!-- startSectionSummary --><!-- endSectionSummary --><!-- startSectionContent --><div class="dyncontent">
<div class="center"><img src="class_fast_salience__coll__graph.png" border="0" usemap="#_fast_salience_coll__map" alt="Collaboration graph"/></div>
<map name="_fast_salience_coll__map" id="_fast_salience_coll__map">
<area shape="rect" id="node2" href="class_open_c_v2_box_filter.html" title="Auxilliary Tool: A class for efficiently applying multiple box convolutions to the same image..." alt="" coords="5,5,141,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center><!-- endSectionContent --></div>

<p><a href="class_fast_salience-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#a48a876e411469715bd6642f56cf3e2fd">FastSalience</a> (int numtemporal, int numspatial, float firsttau=1.0, int firstrad=0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Detailed Constructor.  <a href="#a48a876e411469715bd6642f56cf3e2fd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb5d4808d2fc3b1aae293a7fda9478ca"></a><!-- doxytag: member="FastSalience::FastSalience" ref="abb5d4808d2fc3b1aae293a7fda9478ca" args="()" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#abb5d4808d2fc3b1aae293a7fda9478ca">FastSalience</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Constructor: construct a <a class="el" href="class_fast_salience.html" title="  Machine Perception Primitive:   An implementation of the &quot;Fast Salience Using Natural-statisti...">FastSalience</a> feature detector with default parameters. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#af4d3a7b13f0bb811f5f84f67d5167fcf">~FastSalience</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Simple Destructor.  <a href="#af4d3a7b13f0bb811f5f84f67d5167fcf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#ae50d2e31254891e464184d9e2d0ab774">updateSalience</a> (const cv::Mat &amp;image)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the salience map for a new input frame.  <a href="#ae50d2e31254891e464184d9e2d0ab774"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a777dfde86657e3ddd6aff38b56000c5e"></a><!-- doxytag: member="FastSalience::getSalMap" ref="a777dfde86657e3ddd6aff38b56000c5e" args="(cv::Mat &amp;dest) const " -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#a777dfde86657e3ddd6aff38b56000c5e">getSalMap</a> (cv::Mat &amp;dest) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The current salience map -- negative log likelihood values. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a271392d1ce87c01193df3668b87b78fe"></a><!-- doxytag: member="FastSalience::getSalImage" ref="a271392d1ce87c01193df3668b87b78fe" args="(cv::Mat &amp;dest) const " -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#a271392d1ce87c01193df3668b87b78fe">getSalImage</a> (cv::Mat &amp;dest) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The current salience iamge, normalized to the range 0-1 for display. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#ae11c91831a66d107f933e3baaaebf8e2">setGGDistributionPower</a> (double value)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the Generalized-Gaussian feature distribution to be something other than Laplacian.  <a href="#ae11c91831a66d107f933e3baaaebf8e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#aa6453c6c3057edf8d225e9d1ea56f11a">setUseDoEFeatures</a> (int flag)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle use of Difference of Exponential (motion) features. On by default.  <a href="#aa6453c6c3057edf8d225e9d1ea56f11a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#afd0c58a6c4c71ef5c3084def3ae2d60d">setUseDoBFeatures</a> (int flag)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle use of Difference of Box (spatial) features. On by default.  <a href="#afd0c58a6c4c71ef5c3084def3ae2d60d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#abfdadd37e5689b2a74ed1ce64314da16">setUseColorInformation</a> (int flag)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle use of Color Contrast (red-green and blue-yellow) information. On by default.  <a href="#abfdadd37e5689b2a74ed1ce64314da16"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#a40fa3e702a395dd3486ee2810661cb1e">setUseGGDistributionParams</a> (int flag)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle use of custom Generalized Gaussian Distribution parameters. On by default.  <a href="#a40fa3e702a395dd3486ee2810661cb1e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#a3498d54075d8b09dfd68fb316e769714">setEstimateGGDistributionParams</a> (int flag)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle estimation of custom Generalized Gaussian Distribution parameters. On by default.  <a href="#a3498d54075d8b09dfd68fb316e769714"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; cv::KeyPoint &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_fast_salience.html#a8180254345e716e7b21acf9a80189146">getKeyPoints</a> (int radius=2) const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Find key-point interest detectors using non-maximal suppression on the salience map.  <a href="#a8180254345e716e7b21acf9a80189146"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p><code> <b> Machine Perception Primitive: </b> </code> An implementation of the "Fast Salience Using Natural-statistics" algorithm from Butko, et al., 2008. FastSUN is an efficient implementation of Zhang et al.'s SUN algorithm, which is documented in Zhang, et al., 2008 (see <a class="el" href="bib_page.html#bib_sec">Related Publications</a>). </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Nicholas Butko </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010 version 0.4 </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a48a876e411469715bd6642f56cf3e2fd"></a><!-- doxytag: member="FastSalience::FastSalience" ref="a48a876e411469715bd6642f56cf3e2fd" args="(int numtemporal, int numspatial, float firsttau=1.0, int firstrad=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FastSalience::FastSalience </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>numtemporal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>numspatial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"> <em>firsttau</em> = <code>1.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>firstrad</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Detailed Constructor. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">salwidth</td><td>The width of the input images supplied to the algorithm. Note: No image scaling is done by the <a class="el" href="class_fast_salience.html" title="  Machine Perception Primitive:   An implementation of the &quot;Fast Salience Using Natural-statisti...">FastSalience</a> algorithm, so if you want a salience map of a downscaled image, you must scale the image down to <code>salwidth</code> before calling updateSalience. </td></tr>
    <tr><td class="paramname">salheight</td><td>The height of the input images supplied to the algorithm. Note: No image scaling is done by the <a class="el" href="class_fast_salience.html" title="  Machine Perception Primitive:   An implementation of the &quot;Fast Salience Using Natural-statisti...">FastSalience</a> algorithm, so if you want a salience map of a downscaled image, you must scale the image down to <code>salheight</code> before calling updateSalience. </td></tr>
    <tr><td class="paramname">numtemporal</td><td>Number of timescales of Difference of Expontential filters to track. </td></tr>
    <tr><td class="paramname">numspatial</td><td>Number of sizes of Difference of Box filters to use. </td></tr>
    <tr><td class="paramname">firsttau</td><td>Exponential Falloff parameter for the first Difference of Exponentials scale. Lower numbers give slower falloff. Must be greater than 0. </td></tr>
    <tr><td class="paramname">firstrad</td><td>Radius of smallest Difference of Boxes filter center. The diameter of the box is 2*rad+1, so the smallest allowed first radius is 0. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af4d3a7b13f0bb811f5f84f67d5167fcf"></a><!-- doxytag: member="FastSalience::~FastSalience" ref="af4d3a7b13f0bb811f5f84f67d5167fcf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">FastSalience::~FastSalience </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Simple Destructor. </p>
<p>Deallocates all memory associated with the <a class="el" href="class_fast_salience.html" title="  Machine Perception Primitive:   An implementation of the &quot;Fast Salience Using Natural-statisti...">FastSalience</a> object. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a8180254345e716e7b21acf9a80189146"></a><!-- doxytag: member="FastSalience::getKeyPoints" ref="a8180254345e716e7b21acf9a80189146" args="(int radius=2) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; KeyPoint &gt; FastSalience::getKeyPoints </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>radius</em> = <code>2</code>&#160;)</td>
          <td> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Find key-point interest detectors using non-maximal suppression on the salience map. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">radius</td><td>Non-maximal suppression radius. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3498d54075d8b09dfd68fb316e769714"></a><!-- doxytag: member="FastSalience::setEstimateGGDistributionParams" ref="a3498d54075d8b09dfd68fb316e769714" args="(int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FastSalience::setEstimateGGDistributionParams </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>flag</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Toggle estimation of custom Generalized Gaussian Distribution parameters. On by default. </p>
<p>Initially we assume that image features are drawn from a Laplace distribution of zero mean and unit variance. However, these parameters can be estimated and adjusted online to better reflect the statistics of the current environment. If off, the current estimate of the mean and variance are used. If on, the estimate updates with each new frame (at small computational cost). One approach would be to estimate the parameters for a few frames, and then when the estimates no longer change much, to turn off estimation and just use the "learned" parameters.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>If 0, turn off estimation of histogram information. Otherwise, calculate it. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae11c91831a66d107f933e3baaaebf8e2"></a><!-- doxytag: member="FastSalience::setGGDistributionPower" ref="ae11c91831a66d107f933e3baaaebf8e2" args="(double value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FastSalience::setGGDistributionPower </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>value</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the Generalized-Gaussian feature distribution to be something other than Laplacian. </p>
<p>Image features often exhibit marginal histograms that are of a generalized Gaussian form. The power of these distributions is often between .5 and .7, but performing this power computation is numerically slow. By using a Laplacian distribution (power of one) by defuault, the salience estimate is worse, but much faster to compute. Setting "power" to some lower value may give better but slower resultes.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>The power of a generalized-gaussian feature distribution. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abfdadd37e5689b2a74ed1ce64314da16"></a><!-- doxytag: member="FastSalience::setUseColorInformation" ref="abfdadd37e5689b2a74ed1ce64314da16" args="(int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FastSalience::setUseColorInformation </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>flag</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Toggle use of Color Contrast (red-green and blue-yellow) information. On by default. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>If 0, turn off Color Contrast information. Otherwise, calculate it. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afd0c58a6c4c71ef5c3084def3ae2d60d"></a><!-- doxytag: member="FastSalience::setUseDoBFeatures" ref="afd0c58a6c4c71ef5c3084def3ae2d60d" args="(int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FastSalience::setUseDoBFeatures </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>flag</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Toggle use of Difference of Box (spatial) features. On by default. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>If 0, turn off DoB features. Otherwise, calculate them. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa6453c6c3057edf8d225e9d1ea56f11a"></a><!-- doxytag: member="FastSalience::setUseDoEFeatures" ref="aa6453c6c3057edf8d225e9d1ea56f11a" args="(int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FastSalience::setUseDoEFeatures </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>flag</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Toggle use of Difference of Exponential (motion) features. On by default. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>If 0, turn off DoE features. Otherwise, calculate them. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a40fa3e702a395dd3486ee2810661cb1e"></a><!-- doxytag: member="FastSalience::setUseGGDistributionParams" ref="a40fa3e702a395dd3486ee2810661cb1e" args="(int flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FastSalience::setUseGGDistributionParams </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>flag</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Toggle use of custom Generalized Gaussian Distribution parameters. On by default. </p>
<p>If this is off, we assume that image features are drawn from a Laplace distribution of zero mean and unit variance. However, these parameters can be estimated and adjusted online to better reflect the statistics of the current environment. If on, these online estimates will be used (at small computational cost).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">flag</td><td>If 0, turn off the use of histogram estimate information. Otherwise, use it. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae50d2e31254891e464184d9e2d0ab774"></a><!-- doxytag: member="FastSalience::updateSalience" ref="ae50d2e31254891e464184d9e2d0ab774" args="(const cv::Mat &amp;image)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FastSalience::updateSalience </td>
          <td>(</td>
          <td class="paramtype">const cv::Mat &amp;&#160;</td>
          <td class="paramname"> <em>image</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute the salience map for a new input frame. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">colorframe</td><td>A BGR Color image with width=salwidth and height=salheight. The input image type should be CV_8U3, CV_8U1, CV_32FC1, or CV_32FC3. The salience map that is computed is accessible via getSalImageDouble and getSalImageFloat </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/nick/projects/NickThesis/Code/OpenCV/src/FastSalience.h</li>
<li>/Users/nick/projects/NickThesis/Code/OpenCV/src/FastSalience.cpp</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 9 2010 16:05:48 for Nick's Machine Perception Toolbox by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
