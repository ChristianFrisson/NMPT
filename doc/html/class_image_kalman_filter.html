<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nick&#39;s Machine Perception Toolbox: ImageKalmanFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<h1>ImageKalmanFilter Class Reference<br/>
<small>
[<a class="el" href="group___aux_group.html">Auxilliary Tools</a>]</small>
</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="ImageKalmanFilter" -->
<p><code>Auxilliary Tool:</code> A Collection of Kalman Filters for estimating the appearance of an image.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;ImageKalmanFilter.h&gt;</code></p>

<p><a href="class_image_kalman_filter-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3b8a12c40f11afaee89360a809565f84"></a><!-- doxytag: member="ImageKalmanFilter::operator=" ref="a3b8a12c40f11afaee89360a809565f84" args="(const ImageKalmanFilter &amp;rhs)" -->
<a class="el" href="class_image_kalman_filter.html">ImageKalmanFilter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a3b8a12c40f11afaee89360a809565f84">operator=</a> (const <a class="el" href="class_image_kalman_filter.html">ImageKalmanFilter</a> &amp;rhs)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Assignment Operator. Perform a deep copy of another <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8fee362cc33825f51814c1151f85da36"></a><!-- doxytag: member="ImageKalmanFilter::ImageKalmanFilter" ref="a8fee362cc33825f51814c1151f85da36" args="(const ImageKalmanFilter &amp;copy)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a8fee362cc33825f51814c1151f85da36">ImageKalmanFilter</a> (const <a class="el" href="class_image_kalman_filter.html">ImageKalmanFilter</a> &amp;copy)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy Constructor. Perform a deep copy of another <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a>. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5a51966d3866220dcbab3c01e4a6d193"></a><!-- doxytag: member="ImageKalmanFilter::ImageKalmanFilter" ref="a5a51966d3866220dcbab3c01e4a6d193" args="()" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a5a51966d3866220dcbab3c01e4a6d193">ImageKalmanFilter</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Constructor. Equivalent to calling the main constructor with an observation size of 340x240. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a7759e6a25b9b9e7b8bbec8728226a816">ImageKalmanFilter</a> (cv::Size obsSize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Main Constructor. Initialize with the size of the image that will be observed at each timestep.  <a href="#a7759e6a25b9b9e7b8bbec8728226a816"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afc50e8a74ae8dea221317a9ded87f09b"></a><!-- doxytag: member="ImageKalmanFilter::~ImageKalmanFilter" ref="afc50e8a74ae8dea221317a9ded87f09b" args="()" -->
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#afc50e8a74ae8dea221317a9ded87f09b">~ImageKalmanFilter</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a1e0c3ac7109a4820a948ea2e8c603f85">setObsSize</a> (cv::Size s)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> what size observations to expect. This allows you to change the underlying memory structrue of the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> without creating a new object.  <a href="#a1e0c3ac7109a4820a948ea2e8c603f85"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6596d6a7d608099ecc2ca31cfaa3b15f"></a><!-- doxytag: member="ImageKalmanFilter::getObsSize" ref="a6596d6a7d608099ecc2ca31cfaa3b15f" args="()" -->
cv::Size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a6596d6a7d608099ecc2ca31cfaa3b15f">getObsSize</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the size of Observation that this <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> expects. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a08d20b6a31af4e2dc7cc747b0112bd1f">setWorldSizePadFactor</a> (double val=7.0)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the size of the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> in terms of the width and height of the observations.  <a href="#a08d20b6a31af4e2dc7cc747b0112bd1f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a88bb3b652c5bde685774e07b92c8d886">setUseRetinalCoordinates</a> (int yesorno=1)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the coordinate frame to World Coordinates (0) or Retinal Coordinates (Non-0). By default, retinal coordinates are used.  <a href="#a88bb3b652c5bde685774e07b92c8d886"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#ae5cb9241a68cef01d44592a78bbbf553">setMuPrior</a> (double val=0.5)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the mean of the Image intensity estimates to all be a specified value.  <a href="#ae5cb9241a68cef01d44592a78bbbf553"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#aac3752970697ed4fcb4430c018b36684">setSigmaSquaredPrior</a> (double val=0.25)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the variance of the Image intensity estimates to all be a specified value.  <a href="#aac3752970697ed4fcb4430c018b36684"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a83f7ac6757d4ed43422b86a5b39eee10">setRSquared</a> (double std=0.0001)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the pixel drift variance (how much do pixels change their value over time?).  <a href="#a83f7ac6757d4ed43422b86a5b39eee10"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a4713c94e02126ac9eaeee28001bc3ee1">setQSquared</a> (double std=0.01)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the camera noise variance (how much do you trust an unreliable sensor?).  <a href="#a4713c94e02126ac9eaeee28001bc3ee1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a42f29704d6e472ae34cf5735cf6636b3">setRSquared</a> (IplImage **im)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the pixel drift variance on a pixel-by-pixel basis. If you happen to know (or learn) that certain regions of the world have more motion than others, this is useful.  <a href="#a42f29704d6e472ae34cf5735cf6636b3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#ab4597c64dfe4e39750059efb9cc904b2">setQSquared</a> (IplImage **im)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the sensor reliability on a pixel-by-pixel basis. If you happen to know (or learn) that certain regions of the lens have higher distortion than others, this may be useful.  <a href="#ab4597c64dfe4e39750059efb9cc904b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4de63043d7c273da7a28168a31708dea"></a><!-- doxytag: member="ImageKalmanFilter::getUsesExternalREstimate" ref="a4de63043d7c273da7a28168a31708dea" args="() const " -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a4de63043d7c273da7a28168a31708dea">getUsesExternalREstimate</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether an external image of pixel-drifts has been supplied using <a class="el" href="class_image_kalman_filter.html#a42f29704d6e472ae34cf5735cf6636b3" title="Set the pixel drift variance on a pixel-by-pixel basis. If you happen to know (or learn) that certain...">setRSquared(IplImage**)</a>. If not (or if NULL was set), this returns 0, 1 otherwise. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a376f7d35e2d6c9df4e2d646ec9095e9e"></a><!-- doxytag: member="ImageKalmanFilter::getUsesExternalQEstimate" ref="a376f7d35e2d6c9df4e2d646ec9095e9e" args="() const " -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a376f7d35e2d6c9df4e2d646ec9095e9e">getUsesExternalQEstimate</a> () const </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether an external image of sensor-noise has been supplied using <a class="el" href="class_image_kalman_filter.html#ab4597c64dfe4e39750059efb9cc904b2" title="Set the sensor reliability on a pixel-by-pixel basis. If you happen to know (or learn) that certain r...">setQSquared(IplImage**)</a>. If not (or if NULL was set), this returns 0, 1 otherwise. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaaf57afe435286c851e8cdbe9f12bac3"></a><!-- doxytag: member="ImageKalmanFilter::getNumTransformVals" ref="aaaf57afe435286c851e8cdbe9f12bac3" args="()" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#aaaf57afe435286c851e8cdbe9f12bac3">getNumTransformVals</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">How large is the space of image transformations potentially induced by motor commands? Right now this is 2 (translation, x and y), but in the future the transform space may increase to include rotation, scale, etc., in which case this will return more. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a58c384f2712f13973b028dccb6e3af68">updateModel</a> (IplImage *seenImage, const cv::Mat &amp;tau, IplImage *sqDiffIm=NULL)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> by adding a new seenImage at a specified transformation, tau. tau must be a vector of size [<a class="el" href="class_image_kalman_filter.html#aaaf57afe435286c851e8cdbe9f12bac3" title="How large is the space of image transformations potentially induced by motor commands? Right now this is 2 (translation, x and y), but in the future the transform space may increase to include rotation, scale, etc., in which case this will return more.">getNumTransformVals()</a> x 1].  <a href="#a58c384f2712f13973b028dccb6e3af68"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd1ae746b95068d1bf2a04ea9a1a05d1"></a><!-- doxytag: member="ImageKalmanFilter::obsLogLikelihood" ref="afd1ae746b95068d1bf2a04ea9a1a05d1" args="(const cv::Mat &amp;tau, IplImage *seenImage)" -->
double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#afd1ae746b95068d1bf2a04ea9a1a05d1">obsLogLikelihood</a> (const cv::Mat &amp;tau, IplImage *seenImage)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the log-likelihood value of an observation given a particular transform (translation, x&amp;y, in units of pixels). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlikelihood.html">likelihood</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a370e093ce3fde9875a2a39febdcd4447">modelLogLikelihood</a> (const cv::Mat &amp;tau, IplImage *seenImage)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the log-likelihood value of an observation given a particular transform (translation, x&amp;y, in units of pixels).  <a href="#a370e093ce3fde9875a2a39febdcd4447"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlikelihood.html">likelihood</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#ade45839446451678ed06d1da36968279">modelLogLikelihoodFast</a> (const cv::Mat &amp;tau, IplImage *seenImage, double scale)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the approximate log-likelihood value of an observation given a particular transform (translation, x&amp;y, in units of pixels).  <a href="#ade45839446451678ed06d1da36968279"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aadb113d66a8ea24b95324e68dca81536"></a><!-- doxytag: member="ImageKalmanFilter::mu" ref="aadb113d66a8ea24b95324e68dca81536" args="" -->
IplImage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#aadb113d66a8ea24b95324e68dca81536">mu</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The mean of the current pixel-wise estimate of the image intensity values. This is the actual underlying estimate data. It is exposed for convenient inspection. Don't modify it. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a788750984f6a7ab7a4635004983fe5e8"></a><!-- doxytag: member="ImageKalmanFilter::Sigma" ref="a788750984f6a7ab7a4635004983fe5e8" args="" -->
IplImage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a788750984f6a7ab7a4635004983fe5e8">Sigma</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The variance of the current pixel-wise estimate of the image intensity values. This is the actual underlying estimate data. It is exposed for convenient inspection. Don't modify it. <br/></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aff699768a1e55445526cdd316ecc9c37"></a><!-- doxytag: member="ImageKalmanFilter::operator&lt;&lt;" ref="aff699768a1e55445526cdd316ecc9c37" args="(std::ostream &amp;ofs, const ImageKalmanFilter &amp;feat)" -->
std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#aff699768a1e55445526cdd316ecc9c37">operator&lt;&lt;</a> (std::ostream &amp;ofs, const <a class="el" href="class_image_kalman_filter.html">ImageKalmanFilter</a> &amp;feat)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to a file. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43f293361224dc34047b4687521dd2cf"></a><!-- doxytag: member="ImageKalmanFilter::operator&gt;&gt;" ref="a43f293361224dc34047b4687521dd2cf" args="(std::istream &amp;ifs, ImageKalmanFilter &amp;feat)" -->
std::istream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_image_kalman_filter.html#a43f293361224dc34047b4687521dd2cf">operator&gt;&gt;</a> (std::istream &amp;ifs, <a class="el" href="class_image_kalman_filter.html">ImageKalmanFilter</a> &amp;feat)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from a file. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p><code>Auxilliary Tool:</code> A Collection of Kalman Filters for estimating the appearance of an image. </p>
<p>The Kalman Filter gives a Mean estimate of the values of the image's pixels, and maintains a variance Sigma for each pixel.</p>
<p>Generally, only part of the image is seen at once. This region of the image will have its means updated, and its variances will shrink. All other regions will have their means held constant while their variances increase.</p>
<p>There are many parameters to a Kalman Filter that may be set:</p>
<p>It is useful to think of there being a stochastic relation between x, the true pixel value at a location, and y, the observed pixel value. Specifically y is drawn from a normal distribution with mean x and Variance Q.</p>
<p>It is also useful to think of there being a drift in x, i.e. the image pixel values may change over time. This drift is 0 mean, and has covariance R. If R is 0, you are making a strong assertion that the environment will never change, that nothing moves.</p>
<p>Finally, you may set a prior mean estimate Mu of x, and a prior uncertainty, Sigma.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Nicholas Butko </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010 version 0.4 </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7759e6a25b9b9e7b8bbec8728226a816"></a><!-- doxytag: member="ImageKalmanFilter::ImageKalmanFilter" ref="a7759e6a25b9b9e7b8bbec8728226a816" args="(cv::Size obsSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ImageKalmanFilter::ImageKalmanFilter </td>
          <td>(</td>
          <td class="paramtype">cv::Size&#160;</td>
          <td class="paramname"> <em>obsSize</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Main Constructor. Initialize with the size of the image that will be observed at each timestep. </p>
<p>This is the size of the camera input. By default, <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> assumes that the total seeable world is less than 7 times the width and height of this image. For example, if the observation size that you get from your camera is 320x240, the size of the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> will be 2240x1680. You can change this after the constructor call by calling setWorldSizePadFactor to something other than 7.0. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a370e093ce3fde9875a2a39febdcd4447"></a><!-- doxytag: member="ImageKalmanFilter::modelLogLikelihood" ref="a370e093ce3fde9875a2a39febdcd4447" args="(const cv::Mat &amp;tau, IplImage *seenImage)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlikelihood.html">likelihood</a> ImageKalmanFilter::modelLogLikelihood </td>
          <td>(</td>
          <td class="paramtype">const cv::Mat &amp;&#160;</td>
          <td class="paramname"> <em>tau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IplImage *&#160;</td>
          <td class="paramname"> <em>seenImage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute the log-likelihood value of an observation given a particular transform (translation, x&amp;y, in units of pixels). </p>
<p>The gradients of the likelihood function with respect to tau are not currently computed. </p>

</div>
</div>
<a class="anchor" id="ade45839446451678ed06d1da36968279"></a><!-- doxytag: member="ImageKalmanFilter::modelLogLikelihoodFast" ref="ade45839446451678ed06d1da36968279" args="(const cv::Mat &amp;tau, IplImage *seenImage, double scale)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlikelihood.html">likelihood</a> ImageKalmanFilter::modelLogLikelihoodFast </td>
          <td>(</td>
          <td class="paramtype">const cv::Mat &amp;&#160;</td>
          <td class="paramname"> <em>tau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IplImage *&#160;</td>
          <td class="paramname"> <em>seenImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Compute the approximate log-likelihood value of an observation given a particular transform (translation, x&amp;y, in units of pixels). </p>
<p>This is done by a subsampling method, only sampling and comparing every [scale]th pixel of the current <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> estimate (memory) with those of the seen image (sensation).</p>
<p>The gradients of the likelihood function with respect to tau are not currently computed. </p>

</div>
</div>
<a class="anchor" id="ae5cb9241a68cef01d44592a78bbbf553"></a><!-- doxytag: member="ImageKalmanFilter::setMuPrior" ref="ae5cb9241a68cef01d44592a78bbbf553" args="(double val=0.5)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::setMuPrior </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>val</em> = <code>0.5</code>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the mean of the Image intensity estimates to all be a specified value. </p>
<p>The default value of 0.5 reflects the assumption that pixel intensities are between 0 and 1. If your images uses a different range of (floating point) values, you may want to set a different mean. </p>

</div>
</div>
<a class="anchor" id="a1e0c3ac7109a4820a948ea2e8c603f85"></a><!-- doxytag: member="ImageKalmanFilter::setObsSize" ref="a1e0c3ac7109a4820a948ea2e8c603f85" args="(cv::Size s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::setObsSize </td>
          <td>(</td>
          <td class="paramtype">cv::Size&#160;</td>
          <td class="paramname"> <em>s</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Tell the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> what size observations to expect. This allows you to change the underlying memory structrue of the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> without creating a new object. </p>
<p>Note that this will essentially reconstruct the object, reallocating and reinitializing all data structure memory. The padSizeFactor (size of the world in relation to the observation size) will be used, so the total number of pixels in the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> will change. </p>

</div>
</div>
<a class="anchor" id="a4713c94e02126ac9eaeee28001bc3ee1"></a><!-- doxytag: member="ImageKalmanFilter::setQSquared" ref="a4713c94e02126ac9eaeee28001bc3ee1" args="(double std=0.01)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::setQSquared </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>std</em> = <code>0.01</code>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the camera noise variance (how much do you trust an unreliable sensor?). </p>
<p>The default value of 0.01 reflects the assumption that pixel intensities are between 0 and 1. If your images uses a different range of (floating point) values, you may want to set a different mean. Note that 0.01 variance means standard deviation of 0.1. This is relatively high, and asserts that the current field of view is an unreliable representation of the world's appearance. This helps filter out abberations caused by rapid motion through the visual field. </p>

</div>
</div>
<a class="anchor" id="ab4597c64dfe4e39750059efb9cc904b2"></a><!-- doxytag: member="ImageKalmanFilter::setQSquared" ref="ab4597c64dfe4e39750059efb9cc904b2" args="(IplImage **im)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::setQSquared </td>
          <td>(</td>
          <td class="paramtype">IplImage **&#160;</td>
          <td class="paramname"> <em>im</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the sensor reliability on a pixel-by-pixel basis. If you happen to know (or learn) that certain regions of the lens have higher distortion than others, this may be useful. </p>
<p>Learning the statistics of one's own sensor distortions is an active area of research, and this feature is not well supported.</p>
<p>You are responsible for managing the memory of the underlying image. Setting *im to NULL will cause the program to revert to uniform r-values across the image plane. </p>

</div>
</div>
<a class="anchor" id="a83f7ac6757d4ed43422b86a5b39eee10"></a><!-- doxytag: member="ImageKalmanFilter::setRSquared" ref="a83f7ac6757d4ed43422b86a5b39eee10" args="(double std=0.0001)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::setRSquared </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>std</em> = <code>0.0001</code>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the pixel drift variance (how much do pixels change their value over time?). </p>
<p>The default value of 0.0001 reflects the assumption that pixel intensities are between 0 and 1. If your images uses a different range of (floating point) values, you may want to set a different mean. Note that 0.0001 variance means standard deviation of 0.01. This is relatively low, and asserts that the appearance of the world will be mostly static. </p>

</div>
</div>
<a class="anchor" id="a42f29704d6e472ae34cf5735cf6636b3"></a><!-- doxytag: member="ImageKalmanFilter::setRSquared" ref="a42f29704d6e472ae34cf5735cf6636b3" args="(IplImage **im)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::setRSquared </td>
          <td>(</td>
          <td class="paramtype">IplImage **&#160;</td>
          <td class="paramname"> <em>im</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the pixel drift variance on a pixel-by-pixel basis. If you happen to know (or learn) that certain regions of the world have more motion than others, this is useful. </p>
<p>Learning the statistics of motion in the world is an active area of research, and this feature is not well supported.</p>
<p>You are responsible for managing the memory of the underlying image. Setting *im to NULL will cause the program to revert to uniform r-values across the image plane. </p>

</div>
</div>
<a class="anchor" id="aac3752970697ed4fcb4430c018b36684"></a><!-- doxytag: member="ImageKalmanFilter::setSigmaSquaredPrior" ref="aac3752970697ed4fcb4430c018b36684" args="(double val=0.25)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::setSigmaSquaredPrior </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>val</em> = <code>0.25</code>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the variance of the Image intensity estimates to all be a specified value. </p>
<p>The default value of 0.25 reflects the assumption that pixel intensities are between 0 and 1. If your images uses a different range of (floating point) values, you may want to set a different mean. Note that 0.25 variance means standard deviation of 0.5. </p>

</div>
</div>
<a class="anchor" id="a88bb3b652c5bde685774e07b92c8d886"></a><!-- doxytag: member="ImageKalmanFilter::setUseRetinalCoordinates" ref="a88bb3b652c5bde685774e07b92c8d886" args="(int yesorno=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::setUseRetinalCoordinates </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"> <em>yesorno</em> = <code>1</code>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the coordinate frame to World Coordinates (0) or Retinal Coordinates (Non-0). By default, retinal coordinates are used. </p>
<p>In retinal coordinates, the center of the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> is always colocated with the center of the most recent observation. Actions are interpreted as being relevant to this central location.</p>
<p>In world coordinates, actions are interpreted as being relative to the servo reference frame rather than the camera reference frame.</p>
<p>The <a class="el" href="class_internal_motion_model.html" title="  Machine Perception Primitive:   An implementation of a model that allows a robot to learn about its...">InternalMotionModel</a> is much more robust in a retinal coordinate frame than in a servo coordinate frame. It is not recommended to set this to 0. </p>

</div>
</div>
<a class="anchor" id="a08d20b6a31af4e2dc7cc747b0112bd1f"></a><!-- doxytag: member="ImageKalmanFilter::setWorldSizePadFactor" ref="a08d20b6a31af4e2dc7cc747b0112bd1f" args="(double val=7.0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::setWorldSizePadFactor </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"> <em>val</em> = <code>7.0</code>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the size of the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> in terms of the width and height of the observations. </p>
<p>Note that this will essentially reconstruct the object, reallocating and reinitializing all data structure memory. The current obsSize (size of the images coming from a camera) will be used, so the total number of pixels in the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> will change. </p>

</div>
</div>
<a class="anchor" id="a58c384f2712f13973b028dccb6e3af68"></a><!-- doxytag: member="ImageKalmanFilter::updateModel" ref="a58c384f2712f13973b028dccb6e3af68" args="(IplImage *seenImage, const cv::Mat &amp;tau, IplImage *sqDiffIm=NULL)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ImageKalmanFilter::updateModel </td>
          <td>(</td>
          <td class="paramtype">IplImage *&#160;</td>
          <td class="paramname"> <em>seenImage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cv::Mat &amp;&#160;</td>
          <td class="paramname"> <em>tau</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IplImage *&#160;</td>
          <td class="paramname"> <em>sqDiffIm</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Update the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> by adding a new seenImage at a specified transformation, tau. tau must be a vector of size [<a class="el" href="class_image_kalman_filter.html#aaaf57afe435286c851e8cdbe9f12bac3" title="How large is the space of image transformations potentially induced by motor commands? Right now this is 2 (translation, x and y), but in the future the transform space may increase to include rotation, scale, etc., in which case this will return more.">getNumTransformVals()</a> x 1]. </p>
<p>Optionally, this function can output the an image of the same size as seenImage representing the squared difference between what the <a class="el" href="class_image_kalman_filter.html" title="Auxilliary Tool: A Collection of Kalman Filters for estimating the appearance of an image...">ImageKalmanFilter</a> expected to see based on the transform tau (memory) and what was actually seen (sensation). This may be useful in learning about the reliability of your sensors, and the spatial layout of systematic distortions. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/nick/projects/NickThesis/Code/OpenCV/src/ImageKalmanFilter.h</li>
<li>/Users/nick/projects/NickThesis/Code/OpenCV/src/ImageKalmanFilter.cpp</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 9 2010 16:05:48 for Nick's Machine Perception Toolbox by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
