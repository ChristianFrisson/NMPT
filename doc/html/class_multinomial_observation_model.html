<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nick&#39;s Machine Perception Toolbox: MultinomialObservationModel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<h1>MultinomialObservationModel Class Reference<br/>
<small>
[<a class="el" href="group___aux_group.html">Auxilliary Tools</a>]</small>
</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="MultinomialObservationModel" -->
<p><code>Auxilliary Tool:</code> Multionomial Observation Model, as described in Butko and Movellan, CVPR 2009 (see <a class="el" href="bib_page.html#bib_sec">Related Publications</a>). This data structure maintains the mapping between object detector output and the probability that the target object is located at every grid-cell.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;MultinomialObservationModel.h&gt;</code></p>

<p>Inherited by MOMultinomialObservationModel.</p>

<p><a href="class_multinomial_observation_model-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0a4e6a5e6ec0f848cba39d7126208455"></a><!-- doxytag: member="MultinomialObservationModel::MultinomialObservationModel" ref="a0a4e6a5e6ec0f848cba39d7126208455" args="(CvSize gridSize)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#a0a4e6a5e6ec0f848cba39d7126208455">MultinomialObservationModel</a> (CvSize gridSize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor: Create an observation model with space allocated to hold parameters for a grid of size gridSize. The probabilities are set according to some simple heuristic. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa3921ebd0127073ffd3a7c27b059fcbb"></a><!-- doxytag: member="MultinomialObservationModel::MultinomialObservationModel" ref="aa3921ebd0127073ffd3a7c27b059fcbb" args="(MultinomialObservationModel *modelToCopy)" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#aa3921ebd0127073ffd3a7c27b059fcbb">MultinomialObservationModel</a> (<a class="el" href="class_multinomial_observation_model.html">MultinomialObservationModel</a> *modelToCopy)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Deep Copy Constructor: Create an observation model that is identical to the one copied. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#ab2ade1078c6442e8a1b20a6026942edc">~MultinomialObservationModel</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Destructor.  <a href="#ab2ade1078c6442e8a1b20a6026942edc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#a6f22fd4ca703a1069ea5420363e2192c">setObservationProbability</a> (CvPoint searchPoint, IplImage *faceCount)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an observation (output of the object detector at each grid cell), estimate the relative likelihood that each grid cell's output was caused by the object being located there. The results of this computation are stored in the observationProbability variable.  <a href="#a6f22fd4ca703a1069ea5420363e2192c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#a481f1b3791de69d978c475e04f140b23">resetCounts</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the experience-counts used to estimate the multinomial parameters. Sets all counts to 1.  <a href="#a481f1b3791de69d978c475e04f140b23"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#a4eff5f617afdfc4e83b2b0d628985468">updateProbTableCounts</a> (CvPoint searchPoint, IplImage *faceCount, CvRect faceLocation)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Add evidence from one event to the count-tables that maintain the Dirichlet distribution over the multinomial parameters.  <a href="#a4eff5f617afdfc4e83b2b0d628985468"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#a5e23fe204ac5c7aff36e299f513f8a80">normalizeProbTables</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate the Maximum A Posterior multinomial parameters based on the events seen so far, and use this as the probability distribution estimate in the future.  <a href="#a5e23fe204ac5c7aff36e299f513f8a80"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#a82130f6fa0735a2d7de95c5a54b95968">combineEvidence</a> (<a class="el" href="class_multinomial_observation_model.html">MultinomialObservationModel</a> *otherModel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Combine the evidence from two models (merge their counts and subtract off the extra priors).  <a href="#a82130f6fa0735a2d7de95c5a54b95968"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a26e2f4a1df24a477bf21e9dcd52f874d"></a><!-- doxytag: member="MultinomialObservationModel::observationProbability" ref="a26e2f4a1df24a477bf21e9dcd52f874d" args="" -->
IplImage *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#a26e2f4a1df24a477bf21e9dcd52f874d">observationProbability</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The results of "setObservationProbability" are stored in this variable. Each location contains the probabilty of the entire observation vector if the object were located at that location (up to a factor that is constant for every element). <br/></td></tr>
<tr><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac6f1e336dbc7c5bec5b79e575ea51b53"></a><!-- doxytag: member="MultinomialObservationModel::operator&lt;&lt;" ref="ac6f1e336dbc7c5bec5b79e575ea51b53" args="(std::ostream &amp;ofs, MultinomialObservationModel *a)" -->
std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#ac6f1e336dbc7c5bec5b79e575ea51b53">operator&lt;&lt;</a> (std::ostream &amp;ofs, <a class="el" href="class_multinomial_observation_model.html">MultinomialObservationModel</a> *a)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the probabilities and counts to a file stream, so we can read them in later. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e8191c062c2f93cd6d1c581533e482a"></a><!-- doxytag: member="MultinomialObservationModel::operator&gt;&gt;" ref="a7e8191c062c2f93cd6d1c581533e482a" args="(std::istream &amp;ifs, MultinomialObservationModel *a)" -->
std::istream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_multinomial_observation_model.html#a7e8191c062c2f93cd6d1c581533e482a">operator&gt;&gt;</a> (std::istream &amp;ifs, <a class="el" href="class_multinomial_observation_model.html">MultinomialObservationModel</a> *a)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the probabilities and counts from a file stream, so we don't lose our earlier models. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p><code>Auxilliary Tool:</code> Multionomial Observation Model, as described in Butko and Movellan, CVPR 2009 (see <a class="el" href="bib_page.html#bib_sec">Related Publications</a>). This data structure maintains the mapping between object detector output and the probability that the target object is located at every grid-cell. </p>
<p>An observation model consists of grid-height*grid-width*2 multinomial distributions, each with 10 outcomes. The proportiaonal likelihood that the counts of object-detector firings in a single grid-cell was caused by the object, instead of generated spontaneously, is p(count|object,xdist-to-fixation,ydist-to-fixation) / p(count|noobject,xdist-to-fixation,ydist-to-fixation).</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Nicholas Butko </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>2010 </dd></dl>
<dl class="version"><dt><b>Version:</b></dt><dd>0.4 </dd></dl>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab2ade1078c6442e8a1b20a6026942edc"></a><!-- doxytag: member="MultinomialObservationModel::~MultinomialObservationModel" ref="ab2ade1078c6442e8a1b20a6026942edc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MultinomialObservationModel::~MultinomialObservationModel </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Default Destructor. </p>
<p>Deallocates all memory associated with the haar detector. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a82130f6fa0735a2d7de95c5a54b95968"></a><!-- doxytag: member="MultinomialObservationModel::combineEvidence" ref="a82130f6fa0735a2d7de95c5a54b95968" args="(MultinomialObservationModel *otherModel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultinomialObservationModel::combineEvidence </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_multinomial_observation_model.html">MultinomialObservationModel</a> *&#160;</td>
          <td class="paramname"> <em>otherModel</em>&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Combine the evidence from two models (merge their counts and subtract off the extra priors). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">otherModel</td><td>A second <a class="el" href="class_multinomial_observation_model.html" title="Auxilliary Tool: Multionomial Observation Model, as described in Butko and Movellan, CVPR 2009 (see Related Publications). This data structure maintains the mapping between object detector output and the probability that the target object is located at every grid-cell.">MultinomialObservationModel</a> that has been fit to different data than this one: We can estimate the model for the combined set of data by simply adding the counts, and subtracting duplicate priors. In this way, we can efficiently compose models fit to different subsets of a larger dataset (e.g. for cross-validation).</td></tr>
  </table>
  </dd>
</dl>
<p>In general, this functionality should be accessed indirectly, through the <a class="el" href="class_m_i_p_o_m_d_p.html" title="  Machine Perception Primitive:   An implementation of the &quot;Multinomial IPOMDP&quot; algorithm f...">MIPOMDP</a> cobineModels() function. </p>

</div>
</div>
<a class="anchor" id="a5e23fe204ac5c7aff36e299f513f8a80"></a><!-- doxytag: member="MultinomialObservationModel::normalizeProbTables" ref="a5e23fe204ac5c7aff36e299f513f8a80" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultinomialObservationModel::normalizeProbTables </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Estimate the Maximum A Posterior multinomial parameters based on the events seen so far, and use this as the probability distribution estimate in the future. </p>
<p>Simply updating the counts does not change the estimate of outcome probabilities. This only happens when <a class="el" href="class_multinomial_observation_model.html#a5e23fe204ac5c7aff36e299f513f8a80" title="Estimate the Maximum A Posterior multinomial parameters based on the events seen so far...">normalizeProbTables()</a> is called.</p>
<p>In general, this functionality should be accessed indirectly, through the <a class="el" href="class_m_i_p_o_m_d_p.html" title="  Machine Perception Primitive:   An implementation of the &quot;Multinomial IPOMDP&quot; algorithm f...">MIPOMDP</a> trainObservationModel() function or addDataToObservationModel() function. </p>

</div>
</div>
<a class="anchor" id="a481f1b3791de69d978c475e04f140b23"></a><!-- doxytag: member="MultinomialObservationModel::resetCounts" ref="a481f1b3791de69d978c475e04f140b23" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultinomialObservationModel::resetCounts </td>
          <td>(</td>
          <td class="paramname">&#160;)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reset the experience-counts used to estimate the multinomial parameters. Sets all counts to 1. </p>
<p>The multinomial distribution probabilities are estimated from experience counts. The table of counts forms a dirichlet posterior over the parameters of the multinomials. When the counts are reset to 1, there is a flat prior over multinomial parameters, and all outcomes are seen as equally likely. This is a particularly bad model, and will make it impossible to figure out the location of the face, so only call resetCounts if you're then going to call updateProbTableCounts for enough images to build up a good model.</p>
<p>In general, this functionality should be accessed indirectly, through the <a class="el" href="class_m_i_p_o_m_d_p.html" title="  Machine Perception Primitive:   An implementation of the &quot;Multinomial IPOMDP&quot; algorithm f...">MIPOMDP</a> resetModel() function. </p>

</div>
</div>
<a class="anchor" id="a6f22fd4ca703a1069ea5420363e2192c"></a><!-- doxytag: member="MultinomialObservationModel::setObservationProbability" ref="a6f22fd4ca703a1069ea5420363e2192c" args="(CvPoint searchPoint, IplImage *faceCount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultinomialObservationModel::setObservationProbability </td>
          <td>(</td>
          <td class="paramtype">CvPoint&#160;</td>
          <td class="paramname"> <em>searchPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IplImage *&#160;</td>
          <td class="paramname"> <em>faceCount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Given an observation (output of the object detector at each grid cell), estimate the relative likelihood that each grid cell's output was caused by the object being located there. The results of this computation are stored in the observationProbability variable. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">searchPoint</td><td>The point that was the center of fixation when the object detector was applied to the image.</td></tr>
    <tr><td class="paramname">faceCount</td><td>An "image" of counts with the size of the grid. This is the number of target objects detected with centers in each grid cell as a result of applying the object detector. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4eff5f617afdfc4e83b2b0d628985468"></a><!-- doxytag: member="MultinomialObservationModel::updateProbTableCounts" ref="a4eff5f617afdfc4e83b2b0d628985468" args="(CvPoint searchPoint, IplImage *faceCount, CvRect faceLocation)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MultinomialObservationModel::updateProbTableCounts </td>
          <td>(</td>
          <td class="paramtype">CvPoint&#160;</td>
          <td class="paramname"> <em>searchPoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IplImage *&#160;</td>
          <td class="paramname"> <em>faceCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CvRect&#160;</td>
          <td class="paramname"> <em>faceLocation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add evidence from one event to the count-tables that maintain the Dirichlet distribution over the multinomial parameters. </p>
<p>Given a fixation point and a face location, the resulting object detector output forms a collection of random events. We add these outcomes to a table of counts of witnessed events, and build up a model of how likely each event is.</p>
<p>In general, this functionality should be accessed indirectly, through the <a class="el" href="class_m_i_p_o_m_d_p.html" title="  Machine Perception Primitive:   An implementation of the &quot;Multinomial IPOMDP&quot; algorithm f...">MIPOMDP</a> trainObservationModel() function or addDataToObservationModel() function. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/nick/projects/NickThesis/Code/OpenCV/src/MultinomialObservationModel.h</li>
<li>/Users/nick/projects/NickThesis/Code/OpenCV/src/MultinomialObservationModel.cpp</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Dec 9 2010 16:05:49 for Nick's Machine Perception Toolbox by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
